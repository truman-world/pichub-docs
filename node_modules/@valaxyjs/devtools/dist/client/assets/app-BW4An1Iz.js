import{Z as y,$ as ve,a0 as x,r as z,f as de,a1 as B,o as H,a2 as W,e as X,t as ce,a3 as me,u as pe,a4 as ze,c as he,a5 as M,M as fe,a6 as T,a7 as xe}from"./index-KkE5RyOf.js";const Se={__name:"splitpanes",props:{horizontal:{type:Boolean,default:!1},pushOtherPanes:{type:Boolean,default:!0},maximizePanes:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean,default:!1}},emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click","splitter-dblclick"],setup(C,{emit:N}){const P=N,r=C,O=ze(),l=z([]),w=x(()=>l.value.reduce((e,n)=>(e[~~n.id]=n)&&e,{})),f=x(()=>l.value.length),c=z(null),S=z(!1),v=z({mouseDown:!1,dragging:!1,activeSplitter:null,cursorOffset:0}),h=z({splitter:null,timeoutId:null}),_=x(()=>({[`splitpanes splitpanes--${r.horizontal?"horizontal":"vertical"}`]:!0,"splitpanes--dragging":v.value.dragging})),R=()=>{document.addEventListener("mousemove",u,{passive:!1}),document.addEventListener("mouseup",g),"ontouchstart"in window&&(document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("touchend",g))},E=()=>{document.removeEventListener("mousemove",u,{passive:!1}),document.removeEventListener("mouseup",g),"ontouchstart"in window&&(document.removeEventListener("touchmove",u,{passive:!1}),document.removeEventListener("touchend",g))},L=(e,n)=>{const t=e.target.closest(".splitpanes__splitter");if(t){const{left:a,top:i}=t.getBoundingClientRect(),{clientX:s,clientY:o}="ontouchstart"in window&&e.touches?e.touches[0]:e;v.value.cursorOffset=r.horizontal?o-i:s-a}R(),v.value.mouseDown=!0,v.value.activeSplitter=n},u=e=>{v.value.mouseDown&&(e.preventDefault(),v.value.dragging=!0,requestAnimationFrame(()=>{K(Z(e)),m("resize",{event:e},!0)}))},g=e=>{v.value.dragging&&(window.getSelection().removeAllRanges(),m("resized",{event:e},!0)),v.value.mouseDown=!1,v.value.activeSplitter=null,setTimeout(()=>{v.value.dragging=!1,E()},100)},A=(e,n)=>{"ontouchstart"in window&&(e.preventDefault(),h.value.splitter===n?(clearTimeout(h.value.timeoutId),h.value.timeoutId=null,$(e,n),h.value.splitter=null):(h.value.splitter=n,h.value.timeoutId=setTimeout(()=>h.value.splitter=null,500))),v.value.dragging||m("splitter-click",{event:e,index:n},!0)},$=(e,n)=>{if(m("splitter-dblclick",{event:e,index:n},!0),r.maximizePanes){let t=0;l.value=l.value.map((a,i)=>(a.size=i===n?a.max:a.min,i!==n&&(t+=a.min),a)),l.value[n].size-=t,m("pane-maximize",{event:e,index:n,pane:l.value[n]}),m("resized",{event:e,index:n},!0)}},Y=(e,n)=>{m("pane-click",{event:e,index:w.value[n].index,pane:w.value[n]})},Z=e=>{const n=c.value.getBoundingClientRect(),{clientX:t,clientY:a}="ontouchstart"in window&&e.touches?e.touches[0]:e;return{x:t-(r.horizontal?0:v.value.cursorOffset)-n.left,y:a-(r.horizontal?v.value.cursorOffset:0)-n.top}},J=e=>{e=e[r.horizontal?"y":"x"];const n=c.value[r.horizontal?"clientHeight":"clientWidth"];return r.rtl&&!r.horizontal&&(e=n-e),e*100/n},K=e=>{const n=v.value.activeSplitter;let t={prevPanesSize:F(n),nextPanesSize:k(n),prevReachedMinPanes:0,nextReachedMinPanes:0};const a=0+(r.pushOtherPanes?0:t.prevPanesSize),i=100-(r.pushOtherPanes?0:t.nextPanesSize),s=Math.max(Math.min(J(e),i),a);let o=[n,n+1],d=l.value[o[0]]||null,p=l.value[o[1]]||null;const U=d.max<100&&s>=d.max+t.prevPanesSize,re=p.max<100&&s<=100-(p.max+k(n+1));if(U||re){U?(d.size=d.max,p.size=Math.max(100-d.max-t.prevPanesSize-t.nextPanesSize,0)):(d.size=Math.max(100-p.max-t.prevPanesSize-k(n+1),0),p.size=p.max);return}if(r.pushOtherPanes){const j=Q(t,s);if(!j)return;({sums:t,panesToResize:o}=j),d=l.value[o[0]]||null,p=l.value[o[1]]||null}d!==null&&(d.size=Math.min(Math.max(s-t.prevPanesSize-t.prevReachedMinPanes,d.min),d.max)),p!==null&&(p.size=Math.min(Math.max(100-s-t.nextPanesSize-t.nextReachedMinPanes,p.min),p.max))},Q=(e,n)=>{const t=v.value.activeSplitter,a=[t,t+1];return n<e.prevPanesSize+l.value[a[0]].min&&(a[0]=V(t).index,e.prevReachedMinPanes=0,a[0]<t&&l.value.forEach((i,s)=>{s>a[0]&&s<=t&&(i.size=i.min,e.prevReachedMinPanes+=i.min)}),e.prevPanesSize=F(a[0]),a[0]===void 0)?(e.prevReachedMinPanes=0,l.value[0].size=l.value[0].min,l.value.forEach((i,s)=>{s>0&&s<=t&&(i.size=i.min,e.prevReachedMinPanes+=i.min)}),l.value[a[1]].size=100-e.prevReachedMinPanes-l.value[0].min-e.prevPanesSize-e.nextPanesSize,null):n>100-e.nextPanesSize-l.value[a[1]].min&&(a[1]=G(t).index,e.nextReachedMinPanes=0,a[1]>t+1&&l.value.forEach((i,s)=>{s>t&&s<a[1]&&(i.size=i.min,e.nextReachedMinPanes+=i.min)}),e.nextPanesSize=k(a[1]-1),a[1]===void 0)?(e.nextReachedMinPanes=0,l.value.forEach((i,s)=>{s<f.value-1&&s>=t+1&&(i.size=i.min,e.nextReachedMinPanes+=i.min)}),l.value[a[0]].size=100-e.prevPanesSize-k(a[0]-1),null):{sums:e,panesToResize:a}},F=e=>l.value.reduce((n,t,a)=>n+(a<e?t.size:0),0),k=e=>l.value.reduce((n,t,a)=>n+(a>e+1?t.size:0),0),V=e=>[...l.value].reverse().find(n=>n.index<e&&n.size>n.min)||{},G=e=>l.value.find(n=>n.index>e+1&&n.size>n.min)||{},ee=()=>{var e;const n=Array.from(((e=c.value)==null?void 0:e.children)||[]);for(const t of n){const a=t.classList.contains("splitpanes__pane"),i=t.classList.contains("splitpanes__splitter");!a&&!i&&(t.remove(),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))}},q=(e,n,t=!1)=>{const a=e-1,i=document.createElement("div");i.classList.add("splitpanes__splitter"),t||(i.onmousedown=s=>L(s,a),typeof window<"u"&&"ontouchstart"in window&&(i.ontouchstart=s=>L(s,a)),i.onclick=s=>A(s,a+1)),i.ondblclick=s=>$(s,a+1),n.parentNode.insertBefore(i,n)},ne=e=>{e.onmousedown=void 0,e.onclick=void 0,e.ondblclick=void 0,e.remove()},b=()=>{var e;const n=Array.from(((e=c.value)==null?void 0:e.children)||[]);for(const a of n)a.className.includes("splitpanes__splitter")&&ne(a);let t=0;for(const a of n)a.className.includes("splitpanes__pane")&&(!t&&r.firstSplitter?q(t,a,!0):t&&q(t,a),t++)},ae=({uid:e,...n})=>{const t=w.value[e];for(const[a,i]of Object.entries(n))t[a]=i},ie=e=>{var n;let t=-1;Array.from(((n=c.value)==null?void 0:n.children)||[]).some(a=>(a.className.includes("splitpanes__pane")&&t++,a.isSameNode(e.el))),l.value.splice(t,0,{...e,index:t}),l.value.forEach((a,i)=>a.index=i),S.value&&T(()=>{b(),D({addedPane:l.value[t]}),m("pane-add",{pane:l.value[t]})})},te=e=>{const n=l.value.findIndex(a=>a.id===e);l.value[n].el=null;const t=l.value.splice(n,1)[0];l.value.forEach((a,i)=>a.index=i),T(()=>{b(),m("pane-remove",{pane:t}),D({removedPane:{...t}})})},D=(e={})=>{!e.addedPane&&!e.removedPane?le():l.value.some(n=>n.givenSize!==null||n.min||n.max<100)?oe(e):se(),S.value&&m("resized")},se=()=>{const e=100/f.value;let n=0;const t=[],a=[];for(const i of l.value)i.size=Math.max(Math.min(e,i.max),i.min),n-=i.size,i.size>=i.max&&t.push(i.id),i.size<=i.min&&a.push(i.id);n>.1&&I(n,t,a)},le=()=>{let e=100;const n=[],t=[];let a=0;for(const s of l.value)e-=s.size,s.givenSize!==null&&a++,s.size>=s.max&&n.push(s.id),s.size<=s.min&&t.push(s.id);let i=100;if(e>.1){for(const s of l.value)s.givenSize===null&&(s.size=Math.max(Math.min(e/(f.value-a),s.max),s.min)),i-=s.size;i>.1&&I(i,n,t)}},oe=({addedPane:e,removedPane:n}={})=>{let t=100/f.value,a=0;const i=[],s=[];(e?.givenSize??null)!==null&&(t=(100-e.givenSize)/(f.value-1));for(const o of l.value)a-=o.size,o.size>=o.max&&i.push(o.id),o.size<=o.min&&s.push(o.id);if(!(Math.abs(a)<.1)){for(const o of l.value)e?.givenSize!==null&&e?.id===o.id||(o.size=Math.max(Math.min(t,o.max),o.min)),a-=o.size,o.size>=o.max&&i.push(o.id),o.size<=o.min&&s.push(o.id);a>.1&&I(a,i,s)}},I=(e,n,t)=>{let a;e>0?a=e/(f.value-n.length):a=e/(f.value-t.length),l.value.forEach((i,s)=>{if(e>0&&!n.includes(i.id)){const o=Math.max(Math.min(i.size+a,i.max),i.min),d=o-i.size;e-=d,i.size=o}else if(!t.includes(i.id)){const o=Math.max(Math.min(i.size+a,i.max),i.min),d=o-i.size;e-=d,i.size=o}}),Math.abs(e)>.1&&T(()=>{S.value&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})},m=(e,n=void 0,t=!1)=>{const a=n?.index??v.value.activeSplitter??null;P(e,{...n,...a!==null&&{index:a},...t&&a!==null&&{prevPane:l.value[a-(r.firstSplitter?1:0)],nextPane:l.value[a+(r.firstSplitter?0:1)]},panes:l.value.map(i=>({min:i.min,max:i.max,size:i.size}))})};B(()=>r.firstSplitter,()=>b()),H(()=>{ee(),b(),D(),m("ready"),S.value=!0}),W(()=>S.value=!1);const ue=()=>{var e;return xe("div",{ref:c,class:_.value},(e=O.default)==null?void 0:e.call(O))};return M("panes",l),M("indexedPanes",w),M("horizontal",x(()=>r.horizontal)),M("requestUpdate",ae),M("onPaneAdd",ie),M("onPaneRemove",te),M("onPaneClick",Y),(e,n)=>(X(),he(fe(ue)))}},ge={__name:"pane",props:{size:{type:[Number,String]},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},setup(C){var N;const P=C,r=y("requestUpdate"),O=y("onPaneAdd"),l=y("horizontal"),w=y("onPaneRemove"),f=y("onPaneClick"),c=(N=ve())==null?void 0:N.uid,S=y("indexedPanes"),v=x(()=>S.value[c]),h=z(null),_=x(()=>{const u=isNaN(P.size)||P.size===void 0?0:parseFloat(P.size);return Math.max(Math.min(u,E.value),R.value)}),R=x(()=>{const u=parseFloat(P.minSize);return isNaN(u)?0:u}),E=x(()=>{const u=parseFloat(P.maxSize);return isNaN(u)?100:u}),L=x(()=>{var u;return`${l.value?"height":"width"}: ${(u=v.value)==null?void 0:u.size}%`});return B(()=>_.value,u=>r({uid:c,size:u})),B(()=>R.value,u=>r({uid:c,min:u})),B(()=>E.value,u=>r({uid:c,max:u})),H(()=>{O({id:c,el:h.value,min:R.value,max:E.value,givenSize:P.size===void 0?null:_.value,size:_.value})}),W(()=>w(c)),(u,g)=>(X(),de("div",{ref_key:"paneEl",ref:h,class:"splitpanes__pane",onClick:g[0]||(g[0]=A=>pe(f)(A,u._.uid)),style:me(L.value)},[ce(u.$slots,"default")],4))}};z(!1);z({userRoot:""});const Me=z({posts:[]});z("");z();export{Se as P,ge as g,Me as p};
