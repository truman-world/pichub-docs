import { ViteSSGOptions } from 'vite-ssg';
import * as vite from 'vite';
import { UserConfig, InlineConfig, ViteDevServer, PluginOption, Plugin } from 'vite';
import Vue from '@vitejs/plugin-vue';
import { Options as Options$1 } from 'beasties';
import { Hookable } from 'hookable';
import { PluginVisualizerOptions } from 'rollup-plugin-visualizer';
import { presetWind4, presetAttributify, presetIcons, presetTypography } from 'unocss';
import { VitePluginConfig } from 'unocss/vite';
import Components from 'unplugin-vue-components/vite';
import Markdown from 'unplugin-vue-markdown/vite';
import { EditableTreeNode } from 'unplugin-vue-router';
import Router from 'unplugin-vue-router/vite';
import Layouts from 'vite-plugin-vue-layouts';
import { groupIconVitePlugin } from 'vitepress-plugin-group-icons';
import { D as DefaultTheme, R as RuntimeConfig, a as RedirectItem, V as ValaxyConfig, P as PartialDeep, b as ValaxyAddon, S as SiteConfig, U as UserSiteConfig } from '../shared/valaxy.gqLhCu14.mjs';
import { MarkdownEnv } from 'unplugin-vue-markdown/types';
import { KatexOptions } from 'katex';
import MarkdownIt from 'markdown-it';
import anchorPlugin from 'markdown-it-anchor';
import { Options, MarkdownItAsync } from 'markdown-it-async';
import { ThemeRegistration, BuiltinTheme, LanguageInput, ShikiTransformer, Highlighter } from 'shiki';
export { cli, registerDevCommand, run, startValaxyDev } from './cli/index.mjs';
import { Awaitable } from '@antfu/utils';
import * as defu from 'defu';
import '@vueuse/integrations/useFuse';
import 'medium-zoom';
import 'vanilla-lazyload';
import 'vue-router';
import '@vueuse/core';
import '@unhead/schema-org';
import 'yargs';

declare module 'vite' {
    interface UserConfig {
        ssgOptions?: ViteSSGOptions;
    }
}

/**
 * Valaxy Node Instance
 * @param options
 */
declare function createValaxyNode(options: ResolvedValaxyOptions): ValaxyNode;

interface MarkdownItHeader {
  /**
   * The level of the header
   *
   * `1` to `6` for `<h1>` to `<h6>`
   */
  level: number;
  /**
   * The title of the header
   */
  title: string;
  /**
   * The slug of the header
   *
   * Typically the `id` attr of the header anchor
   */
  slug: string;
  /**
   * Link of the header
   *
   * Typically using `#${slug}` as the anchor hash
   */
  link: string;
  /**
   * The children of the header
   */
  children: MarkdownItHeader[];
}

//#region src/types.d.ts

/**
 * Options of @mdit-vue/plugin-headers
 */
interface HeadersPluginOptions {
  /**
   * A custom slugification function
   *
   * Should use the same slugify function with markdown-it-anchor
   * to ensure the link is matched
   */
  slugify?: (str: string) => string;
  /**
   * A function for formatting header title
   */
  format?: (str: string) => string;
  /**
   * Heading level that going to be extracted
   *
   * Should be a subset of markdown-it-anchor's `level` option
   * to ensure the slug is existed
   *
   * @default [2,3]
   */
  level?: number[];
  /**
   * Should allow headers inside nested blocks or not
   *
   * If set to `true`, headers inside blockquote, list, etc. would also be extracted.
   *
   * @default false
   */
  shouldAllowNested?: boolean;
}
declare module '@mdit-vue/types' {
  interface MarkdownItEnv {
    /**
     * The headers that extracted by `@mdit-vue/plugin-headers`
     */
    headers?: MarkdownItHeader[];
  }
}

//#endregion
//#region src/types.d.ts
/**
 * Options of @mdit-vue/plugin-sfc
 */
interface SfcPluginOptions {
  /**
   * Custom blocks to be extracted
   *
   * @default []
   */
  customBlocks?: string[];
}
/**
 * SFC block that extracted from markdown
 */
interface SfcBlock {
  /**
   * The type of the block
   */
  type: string;
  /**
   * The content, including open-tag and close-tag
   */
  content: string;
  /**
   * The content that stripped open-tag and close-tag off
   */
  contentStripped: string;
  /**
   * The open-tag
   */
  tagOpen: string;
  /**
   * The close-tag
   */
  tagClose: string;
}
interface MarkdownSfcBlocks {
  /**
   * The `<template>` block
   */
  template: SfcBlock | null;
  /**
   * The common `<script>` block
   */
  script: SfcBlock | null;
  /**
   * The `<script setup>` block
   */
  scriptSetup: SfcBlock | null;
  /**
   * All `<script>` blocks.
   *
   * By default, SFC only allows one `<script>` block and one `<script setup>` block.
   * However, some tools may support different types of `<script>`s, so we keep all of them here.
   */
  scripts: SfcBlock[];
  /**
   * All `<style>` blocks.
   */
  styles: SfcBlock[];
  /**
   * All custom blocks.
   */
  customBlocks: SfcBlock[];
}
declare module '@mdit-vue/types' {
  interface MarkdownItEnv {
    /**
     * SFC blocks that extracted by `@mdit-vue/plugin-sfc`
     */
    sfcBlocks?: MarkdownSfcBlocks;
  }
}

//#region src/types.d.ts
/**
 * Options of @mdit-vue/plugin-toc
 */
interface TocPluginOptions {
  /**
   * The pattern serving as the TOC placeholder in your markdown
   *
   * @default /^\[\[toc\]\]$/i
   */
  pattern?: RegExp;
  /**
   * A custom slugification function
   *
   * Should use the same slugify function with markdown-it-anchor
   * to ensure the link is matched
   */
  slugify?: (str: string) => string;
  /**
   * A function for formatting headings
   */
  format?: (str: string) => string;
  /**
   * Heading level that going to be included in the TOC
   *
   * Should be a subset of markdown-it-anchor's `level` option
   * to ensure the link is existed
   *
   * @default [2,3]
   */
  level?: number[];
  /**
   * Should allow headers inside nested blocks or not
   *
   * If set to `true`, headers inside blockquote, list, etc. would also be included.
   *
   * @default false
   */
  shouldAllowNested?: boolean;
  /**
   * HTML tag of the TOC container
   *
   * @default 'nav'
   */
  containerTag?: string;
  /**
   * The class for the TOC container
   *
   * @default 'table-of-contents'
   */
  containerClass?: string;
  /**
   * HTML tag of the TOC list
   *
   * @default 'ul'
   */
  listTag?: 'ol' | 'ul';
  /**
   * The class for the TOC list
   *
   * @default ''
   */
  listClass?: string;
  /**
   * The class for the `<li>` tag
   *
   * @default ''
   */
  itemClass?: string;
  /**
   * The tag of the link inside `<li>` tag
   *
   * @default 'a'
   */
  linkTag?: 'a' | 'router-link';
  /**
   * The class for the link inside the `<li>` tag
   *
   * @default ''
   */
  linkClass?: string;
}

interface BlockItem {
    text?: string;
    icon?: string;
    color?: string;
}
interface Blocks {
    tip?: BlockItem;
    warning?: BlockItem;
    danger?: BlockItem;
    info?: BlockItem;
    details?: BlockItem;
}
interface ContainerOptions {
    blocks?: Blocks;
    languages?: string[];
}

type ThemeOptions = ThemeRegistration | BuiltinTheme | {
    light: ThemeRegistration | BuiltinTheme;
    dark: ThemeRegistration | BuiltinTheme;
};
/**
 * Extend Markdown options
 * @zh 扩展 Markdown 配置，包含代码高亮、Markdown-it 和插件配置
 */
interface MarkdownOptions extends Options {
    /**
     * Setup markdown-it instance before applying plugins
     */
    preConfig?: (md: MarkdownItAsync) => void;
    /**
     * markdown-it options
     */
    options?: MarkdownIt['options'];
    /**
     * config markdown-it
     */
    config?: (md: MarkdownItAsync) => void;
    anchor?: anchorPlugin.AnchorOptions;
    attrs?: {
        leftDelimiter?: string;
        rightDelimiter?: string;
        allowedAttributes?: string[];
        disable?: boolean;
    };
    /**
     * Custom theme for syntax highlighting.
     *
     * You can also pass an object with `light` and `dark` themes to support dual themes.
     *
     * @see You can use an existing theme. https://shiki.style/themes
     * @see Or add your own theme. https://shiki.style/guide/load-theme
     *
     * @example { theme: 'github-dark' }
     * @example light and dark themes
     * ```js
     * { theme: { light: 'github-light', dark: 'github-dark' } }
     * ```
     */
    theme?: ThemeOptions;
    /**
     * Languages for syntax highlighting.
     * @see https://shiki.style/languages
     */
    languages?: LanguageInput[];
    /**
     * Custom language aliases.
     *
     * @example { 'my-lang': 'js' }
     * @see https://shiki.style/guide/load-lang#custom-language-aliases
     */
    languageAlias?: Record<string, string>;
    /**
     * Show line numbers in code blocks
     * @default false
     */
    lineNumbers?: boolean;
    /**
     * Fallback language when the specified language is not available.
     */
    defaultHighlightLang?: string;
    /**
     * Transformers applied to code blocks
     * @see https://shiki.style/guide/transformers
     */
    codeTransformers?: ShikiTransformer[];
    /**
     * Setup Shiki instance
     */
    shikiSetup?: (shiki: Highlighter) => void | Promise<void>;
    /**
     * Options for `@mdit-vue/plugin-headers`
     * @see https://github.com/mdit-vue/mdit-vue/tree/main/packages/plugin-headers
     */
    headers?: HeadersPluginOptions | boolean;
    /**
     * Options for `@mdit-vue/plugin-sfc`
     * @see https://github.com/mdit-vue/mdit-vue/tree/main/packages/plugin-sfc
     */
    sfc?: SfcPluginOptions;
    /**
     * Options for `@mdit-vue/plugin-toc`
     * @see https://github.com/mdit-vue/mdit-vue/tree/main/packages/plugin-toc
     */
    toc?: TocPluginOptions;
    /**
     * Options for `markdown-it-container`
     * @see https://github.com/markdown-it/markdown-it-container
     */
    container?: ContainerOptions;
    /**
     * Custom block configurations based on `markdown-it-container`
     */
    blocks?: Record<string, BlockItem> | Blocks;
    /**
     * @see [markdown-it-image-figures](https://www.npmjs.com/package/markdown-it-image-figures)
     */
    imageFigures?: {
        lazy: boolean;
        removeSrc: boolean;
        async: boolean;
        classes: string;
    };
    /**
     * @see https://katex.org/docs/options.html
     */
    katex?: KatexOptions;
    externalLinks?: Record<string, string>;
}

type HookResult = Promise<void> | void;
interface ValaxyHooks {
    'options:resolved': () => HookResult;
    'config:init': () => HookResult;
    /**
     * @see valaxy/node/plugins/vueRouter.ts extendRoute
     */
    'vue-router:extendRoute': (route: EditableTreeNode) => HookResult;
    'vue-router:beforeWriteFiles': (root: EditableTreeNode) => HookResult;
    'build:before': () => HookResult;
    'build:after': () => HookResult;
}

interface ValaxyEntryOptions {
    /**
     * theme name
     */
    theme?: string;
    userRoot: string;
}
interface ValaxyServerOptions {
    onConfigReload?: (newConfig: ValaxyNodeConfig, config: ValaxyNodeConfig, force?: boolean) => void;
}
interface ResolvedValaxyOptions<ThemeConfig = DefaultTheme.Config> {
    mode: 'dev' | 'build';
    /**
     * package.json root
     */
    pkgRoot: string;
    /**
     * temp dir, store d.ts and other temp files
     * .valaxy
     */
    tempDir: string;
    /**
     * Client root path
     * @default 'valaxy/client'
     */
    clientRoot: string;
    /**
     * User root path
     * @default process.cwd()
     */
    userRoot: string;
    /**
     * Theme root path
     */
    themeRoot: string;
    /**
     * Addon root path
     */
    addonRoots: string[];
    /**
     * clientRoot, themeRoot, ...addonRoots, userRoot
     */
    roots: string[];
    theme: string;
    /**
     * Valaxy Config
     */
    config: ValaxyNodeConfig<ThemeConfig> & {
        /**
         * Generated Runtime Config
         */
        runtimeConfig: RuntimeConfig;
    };
    /**
     * config file path
     */
    configFile: string;
    siteConfigFile: string;
    themeConfigFile: string;
    pages: string[];
    /**
     * all addons
     * Record<package-name, OptionResolver>
     */
    addons: ValaxyAddonResolver[];
    /**
     * Collect redirect rule
     */
    redirects: RedirectItem[];
    env: MarkdownEnv & {
        links: string[];
    };
}

type ValaxyNodeConfig<ThemeConfig = DefaultTheme.Config> = ValaxyConfig<ThemeConfig> & ValaxyExtendConfig;
type UserValaxyNodeConfig<ThemeConfig = DefaultTheme.Config> = PartialDeep<ValaxyNodeConfig<ThemeConfig>>;
/**
 * fn with options for theme config
 */
type ValaxyConfigFn<ThemeConfig = DefaultTheme.Config> = (options: ResolvedValaxyOptions<ThemeConfig>) => ValaxyNodeConfig | Promise<ValaxyNodeConfig>;
type ValaxyConfigExport<ThemeConfig = DefaultTheme.Config> = ValaxyNodeConfig<ThemeConfig> | ValaxyConfigFn<ThemeConfig>;
interface ValaxyNode {
    version: string;
    hooks: Hookable<ValaxyHooks>;
    hook: ValaxyNode['hooks']['hook'];
    options: ResolvedValaxyOptions;
}
interface ValaxyExtendConfig {
    /**
     * Don't fail builds due to dead links.
     *
     * @default false
     * @deprecated use `build.ignoreDeadLinks` instead
     */
    ignoreDeadLinks?: boolean | 'localhostLinks' | (string | RegExp | ((link: string) => boolean))[];
    /**
     * options for `valaxy build`
     */
    build: {
        /**
         * Don't fail builds due to dead links.
         * @zh 忽略死链
         * @default false
         */
        ignoreDeadLinks?: boolean | 'localhostLinks' | (string | RegExp | ((link: string) => boolean))[];
        /**
         * Enable SSG for pagination
         * @en When enabled, it will generate pagination pages for you. `/page/1`, `/page/2`, ...
         * @zh 启用 SSG 分页，将单独构建分页页面 `/page/1`, `/page/2`, ...
         * @default false
         */
        ssgForPagination: boolean;
    };
    /**
     * @experimental
     * Deploy to gh-pages/remote server
     */
    deploy: {
        /**
         * @zh 部署类型
         * @en deploy type
         */
        type?: 'gh-pages' | 'remote';
    };
    /**
     * internal modules
     */
    modules: {
        rss: {
            /**
             * enable rss
             */
            enable: boolean;
            /**
             * @zh 全文输出
             * @en full text output
             * @default false
             */
            fullText: boolean;
            /**
             * @zh 从构建后的 HTML 中提取图片路径（用于解析 Vite 打包后的 hash 文件名）
             * @en Extract image paths from built HTML files (to resolve Vite hashed filenames)
             * @default true
             */
            extractImagePathsFromHTML: boolean;
        };
    };
    /**
     * Markdown Feature
     */
    features: {
        /**
         * enable katex for global
         * @see [Example | Valaxy](https://valaxy.site/examples/katex)
         * @see https://katex.org/
         * @default true
         */
        katex: boolean;
    };
    /**
     * vite.config.ts options
     * @see https://vite.dev/
     */
    vite?: UserConfig;
    /**
     * @vitejs/plugin-vue options
     * @see https://github.com/vitejs/vite-plugin-vue/blob/main/packages/plugin-vue/README.md
     */
    vue?: Parameters<typeof Vue>[0] & {
        /**
         * @valaxy
         */
        isCustomElement?: ((tag: string) => boolean)[];
        /**
         * @valaxy
         * @see https://cn.vuejs.org/guide/scaling-up/tooling#note-on-in-browser-template-compilation
         * enable
         *
         * for runtime compile vue, encrypt and decrypt
         * for excerpt_type: html (runtime render)
         *
         * @default true
         *
         * browserTemplateCompilation
         * @description 支持浏览器内的模板编译
         */
        browserTemplateCompilation?: boolean;
    };
    /**
     * @see https://github.com/unplugin/unplugin-vue-components
     *
     * exclude @default components/.exclude
     */
    components?: Parameters<typeof Components>[0];
    /**
     * @see https://github.com/JohnCampionJr/vite-plugin-vue-layouts
     */
    layouts?: Parameters<typeof Layouts>[0];
    /**
     * @see https://github.com/posva/unplugin-vue-router
     */
    router?: Parameters<typeof Router>[0];
    /**
     * @see https://unocss.dev/config/
     */
    unocss?: VitePluginConfig;
    /**
     * rollup-plugin-visualizer
     * @see https://github.com/btd/rollup-plugin-visualizer
     */
    visualizer?: PluginVisualizerOptions;
    /**
     * @see https://github.com/yuyinws/vitepress-plugin-group-icons
     */
    groupIcons?: Partial<NonNullable<Parameters<typeof groupIconVitePlugin>[0]>>;
    /**
     * unocss presets
     * @see https://unocss.dev/guide/presets
     */
    unocssPresets?: {
        /**
         * @deprecated use wind4 instead
         */
        uno?: Parameters<typeof presetWind4>[0];
        attributify?: Parameters<typeof presetAttributify>[0];
        icons?: Parameters<typeof presetIcons>[0];
        typography?: Parameters<typeof presetTypography>[0];
        wind4?: Parameters<typeof presetWind4>[0];
    };
    fuse?: {
        /**
         * @en_US Extends the metadata fields returned by the search
         * @zh_CN 扩展搜索返回的元数据字段
         * @default []
         * @description:en-US By default, returns the following fields: title, tags, categories, author, excerpt, link
         * @description:zh-CN 默认返回以下字段：title、tags、categories、author、excerpt、link
         */
        extendKeys?: string[];
    };
    /**
     * @experimental
     * Enable Vue Devtools & Valaxy Devtools
     * @see https://devtools-next.vuejs.org/
     */
    devtools?: boolean;
    /**
     * @en config for markdown (include markdown-it plugins)
     * @zh markdown 相关配置
     * {@link MarkdownOptions}
     */
    markdown?: MarkdownOptions & Parameters<typeof Markdown>[0];
    /**
     * @en Extend markdown, you can modify the markdown content/excerpt
     * @zh 扩展 markdown
     */
    extendMd?: (ctx: {
        route: EditableTreeNode;
        data: Readonly<Record<string, any>>;
        content: string;
        excerpt?: string;
        path: string;
    }) => void;
    /**
     * @en Addons system
     * @zh 插件系统
     * @see 为什么需要插件？ [Why Addon? | Valaxy](https://valaxy.site/addons/why)
     * @see 插件橱窗 [Addons Gallery | Valaxy](https://valaxy.site/addons/gallery)
     * @example
     * ```ts
     * import { defineValaxyConfig } from 'valaxy'
     * import { addonTest } from 'valaxy-addon-test'
     *
     * export default defineValaxyConfig({
     *   addons: [
     *     // we always recommend to use function, so that you can pass options
     *     addonTest(),
     *   ]
     * })
     * ```
     */
    addons?: ValaxyAddons;
    /**
     * @en Hooks system, you can customize each stage of the lifecycle.
     * @zh 钩子系统，你可以对生命周期的各个阶段进行定制。
     * @see https://valaxy.site/guide/custom/hooks
     */
    hooks?: Partial<ValaxyHooks>;
    /**
     * beastiesOptions
     * @see https://github.com/danielroe/beasties
     */
    beastiesOptions?: Options$1;
}
type ValaxyApp = ReturnType<typeof createValaxyNode>;

interface ValaxyAddonResolver {
    name: string;
    root: string;
    enable: boolean;
    global: boolean;
    props: Record<string, any>;
    options: Record<string, any>;
    configFile?: string;
    pkg: Record<string, any>;
    setup?: (node: ValaxyNode) => void;
}
type ValaxyAddonLike = ValaxyAddon | false | null | undefined;
type ValaxyAddons = (ValaxyAddon | string)[] | Record<string, ValaxyAddonLike>;
type ValaxyAddonFn<ThemeConfig = DefaultTheme.Config> = (addonOptions: ValaxyAddonResolver, valaxyOptions: ResolvedValaxyOptions<ThemeConfig>) => ValaxyNodeConfig | Promise<ValaxyNodeConfig>;
type ValaxyAddonExport<ThemeConfig = DefaultTheme.Config> = ValaxyNodeConfig<ThemeConfig> | ValaxyAddonFn<ThemeConfig>;

declare function build(valaxyApp: ValaxyNode, viteConfig?: InlineConfig): Promise<void>;
declare function ssgBuild(valaxyApp: ValaxyNode, viteConfig?: InlineConfig): Promise<void>;
/**
 * post process for ssg fix extra string like `/html>` `ml>` `l>`
 * handle tasks after ssg build
 * todo find why
 * @param options
 */
declare function postProcessForSSG(options: ResolvedValaxyOptions): Promise<void>;
declare function generateClientRedirects(options: ResolvedValaxyOptions): Promise<void>;

/**
 * merge vite.config.ts (user & theme)
 * @internal
 */
declare function mergeViteConfigs({ userRoot, themeRoot }: ResolvedValaxyOptions, command: 'serve' | 'build'): Promise<InlineConfig>;
/**
 * generate index.html from user/theme/client
 * @internal
 */
declare function getIndexHtml({ clientRoot, themeRoot, userRoot, config }: ResolvedValaxyOptions, rawHtml: string): Promise<string>;

declare function defineValaxyAddon<AddonOptions = object>(addonFunc: (addonOptions?: AddonOptions, valaxyOptions?: ResolvedValaxyOptions) => ValaxyAddon & {
    setup?: ValaxyAddonResolver['setup'];
}): (addonOptions?: AddonOptions, valaxyOptions?: ResolvedValaxyOptions) => ValaxyAddon & {
    setup?: ValaxyAddonResolver["setup"];
};
declare const defineAddon: typeof defineValaxyAddon;
declare function resolveAddonsConfig(addons: ValaxyAddonResolver[], options: ResolvedValaxyOptions): Promise<ValaxyNodeConfig>;

interface LoadConfigFromFileOptions {
    cwd?: string;
    valaxyOptions?: ResolvedValaxyOptions;
}
type UserInputConfig = Record<string, any>;
interface ResolvedConfig<T extends UserInputConfig = UserInputConfig> {
    config: T;
    configFile: string;
}
declare function loadConfigFromFile<T extends UserInputConfig>(name: string, options?: LoadConfigFromFileOptions): Promise<ResolvedConfig<T>>;

declare const defaultSiteConfig: SiteConfig;
/**
 * Type helper for site.config.ts
 * @param config
 */
declare function defineSiteConfig(config: UserSiteConfig): PartialDeep<SiteConfig>;
/**
 * resolve valaxy config from special root
 */
declare function resolveSiteConfigFromRoot(root: string): Promise<ResolvedConfig<PartialDeep<SiteConfig>>>;
/**
 * resolve site.config.ts and merge with default
 * @param root
 */
declare function resolveSiteConfig(root: string): Promise<{
    siteConfig: PartialDeep<SiteConfig>;
    siteConfigFile: string;
}>;

/**
 * resolve theme config from special root
 */
declare function resolveThemeConfigFromRoot(root: string): Promise<ResolvedConfig<DefaultTheme.Config>>;
/**
 * resolve theme.config.ts and merge with default
 */
declare function resolveUserThemeConfig(options: {
    userRoot: string;
    themeRoot: string;
}): Promise<{
    themeConfig: DefaultTheme.Config;
    themeConfigFile: string;
}>;
type ValaxyConfigExtendKey = 'vite' | 'vue' | 'unocss' | 'unocssPresets' | 'markdown' | 'extendMd' | 'addons';
type ValaxyPickConfig = Pick<ValaxyNodeConfig, ValaxyConfigExtendKey>;
type ValaxyTheme<ThemeConfig = DefaultTheme.Config> = ValaxyPickConfig & {
    themeConfig?: ThemeConfig;
};
declare function defineValaxyTheme<ThemeConfig = DefaultTheme.Config>(theme: ValaxyTheme<ThemeConfig> | ((options: ResolvedValaxyOptions<ThemeConfig>) => ValaxyTheme<ThemeConfig>)): ValaxyTheme<ThemeConfig> | ((options: ResolvedValaxyOptions<ThemeConfig>) => ValaxyTheme<ThemeConfig>);
declare const defineTheme: typeof defineValaxyTheme;

declare const defaultValaxyConfig: ValaxyNodeConfig;
/**
 * Type helper for valaxy.config.ts
 */
declare function defineValaxyConfig<ThemeConfig>(config: UserValaxyNodeConfig<ThemeConfig>): PartialDeep<ValaxyNodeConfig<ThemeConfig>>;
declare const defineConfig: typeof defineValaxyConfig;
declare function resolveValaxyConfigFromRoot(root: string, options?: ResolvedValaxyOptions): Promise<ResolvedConfig<ValaxyNodeConfig>>;
/**
 * merge valaxy.config
 * (source, default)
 */
declare const mergeValaxyConfig: <Source extends {
    [x: string]: any;
    [x: number]: any;
    [x: symbol]: any;
}, Defaults extends Array<{
    [x: string]: any;
    [x: number]: any;
    [x: symbol]: any;
} | (number | boolean | any[] | Record<never, any> | null | undefined)>>(source: Source, ...defaults: Defaults) => defu.Defu<Source, Defaults>;
/**
 * resolve user valaxy config
 * options only have userRoot
 * @param options
 */
declare function resolveValaxyConfig(options: ValaxyEntryOptions): Promise<{
    config: ValaxyNodeConfig;
    configFile: string;
    theme: string;
}>;

type UnoSetup = () => Awaitable<Partial<VitePluginConfig> | undefined>;
declare function defineUnoSetup(fn: UnoSetup): UnoSetup;

declare const EXCERPT_SEPARATOR = "<!-- more -->";
declare const PATHNAME_PROTOCOL_RE: RegExp;
declare const ALL_ROUTE = "/:all(.*)*";
declare const customElements: Set<string>;
/**
 * @see https://vitejs.dev/config/shared-options.html#css-preprocessoroptions for sass@2
 * vite@7 default use sass modern api
 */
declare const defaultViteConfig: UserConfig;

declare let version: string;

declare const GLOBAL_STATE: {
    valaxyApp: ValaxyApp | undefined;
    server: ViteDevServer | undefined;
};

/**
 * Post process valaxyOptions
 * @param valaxyOptions
 * @param valaxyConfig
 */
declare function processValaxyOptions(valaxyOptions: ResolvedValaxyOptions, valaxyConfig: ValaxyNodeConfig): Promise<ResolvedValaxyOptions<DefaultTheme.Config>>;
declare function resolveOptions(options?: ValaxyEntryOptions, mode?: ResolvedValaxyOptions['mode']): Promise<ResolvedValaxyOptions<DefaultTheme.Config>>;
/**
 * resolve theme config
 * @param options
 */
declare function resolveThemeValaxyConfig(options: ResolvedValaxyOptions): Promise<ValaxyNodeConfig>;

declare function ViteValaxyPlugins(valaxyApp: ValaxyNode, serverOptions?: ValaxyServerOptions): Promise<(PluginOption | PluginOption[])[]>;

/**
 * @packageDocumentation valaxy plugin
 */

/**
 * create valaxy loader (custom virtual modules)
 * multiple plugins
 * @internal
 * @param options
 * @param serverOptions
 */
declare function createValaxyPlugin(options: ResolvedValaxyOptions, serverOptions?: ValaxyServerOptions): Promise<Plugin[]>;

/**
 * with valaxyPrefix
 */
declare function getServerInfoText(msg: string): string;
declare function createServer(valaxyApp: ValaxyNode, viteConfig?: InlineConfig, serverOptions?: ValaxyServerOptions): Promise<vite.ViteDevServer>;

/**
 * @see https://github.com/mdn/dom-examples/blob/main/web-crypto/encrypt-decrypt/aes-cbc.js
 * @param content
 */
declare function encryptContent(content: string, options: {
    password: string;
    iv: Uint8Array;
    salt: Uint8Array;
}): Promise<string>;

declare function getGitTimestamp(file: string, type?: 'created' | 'updated'): Promise<number>;

/**
 * is url external (http/https:)
 * @param str
 */
declare function isExternal(str: string): boolean;
declare function isPath(name: string): boolean;
/**
 * transform obj for vite code
 * @param obj
 */
declare function transformObject(obj: any): string;

/**
 * @experimental 试验性
 * @see https://github.com/YunYouJun/valaxy/issues/566
 * @param key
 *
 * 声明这是一个使用国际化的 key
 * 从 locales/ 目录中获取对应的翻译
 */
declare function $t(key: string): string;

declare const isInstalledGlobally: {
    value?: boolean;
};
/**
 * Resolve path for import url on Vite client side
 */
declare function resolveImportUrl(id: string): Promise<string>;
declare function toAtFS(path: string): string;
/**
 * Before is CJS: use 'resolve'
 * ESM: use 'mlly'
 */
declare function resolveImportPath(importName: string, ensure?: true): Promise<string>;
declare function resolveImportPath(importName: string, ensure?: boolean): Promise<string | undefined>;

export { $t, ALL_ROUTE, EXCERPT_SEPARATOR, GLOBAL_STATE, PATHNAME_PROTOCOL_RE, ViteValaxyPlugins, build, createServer, createValaxyPlugin, customElements, defaultSiteConfig, defaultValaxyConfig, defaultViteConfig, defineAddon, defineConfig, defineSiteConfig, defineTheme, defineUnoSetup, defineValaxyAddon, defineValaxyConfig, defineValaxyTheme, encryptContent, generateClientRedirects, getGitTimestamp, getIndexHtml, getServerInfoText, isExternal, isInstalledGlobally, isPath, loadConfigFromFile, mergeValaxyConfig, mergeViteConfigs, postProcessForSSG, processValaxyOptions, resolveAddonsConfig, resolveImportPath, resolveImportUrl, resolveOptions, resolveSiteConfig, resolveSiteConfigFromRoot, resolveThemeConfigFromRoot, resolveThemeValaxyConfig, resolveUserThemeConfig, resolveValaxyConfig, resolveValaxyConfigFromRoot, ssgBuild, toAtFS, transformObject, version };
export type { HookResult, LoadConfigFromFileOptions, ResolvedConfig, ResolvedValaxyOptions, UnoSetup, UserInputConfig, UserValaxyNodeConfig, ValaxyAddonExport, ValaxyAddonFn, ValaxyAddonLike, ValaxyAddonResolver, ValaxyAddons, ValaxyApp, ValaxyConfigExport, ValaxyConfigExtendKey, ValaxyConfigFn, ValaxyEntryOptions, ValaxyExtendConfig, ValaxyHooks, ValaxyNode, ValaxyNodeConfig, ValaxyPickConfig, ValaxyServerOptions, ValaxyTheme };
